<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>GreenGrocer - Staff</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="/static/img/favicon.png" rel="icon">
    <link href="/static/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="/static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="/static/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="/static/vendor/quill/quill.snow.css" rel="stylesheet">
    <link href="/static/vendor/quill/quill.bubble.css" rel="stylesheet">
    <link href="/static/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="/static/vendor/simple-datatables/style.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="/static/css/style.css" rel="stylesheet">
    <style>
        .assignee-card {
            border: 3px solid #ffffff;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            position: relative;
            background-color: white;
            /* Allows positioning of child elements */
        }

        .edit-icon {
            float: right;
            cursor: pointer;
            font-size: 1.5rem;
            /* Increase font size for the icon */
            color: #007bff;
            /* Optionally, change the color */
        }

        .edit-icon:hover {
            color: #0056b3;
            /* Darker color on hover */
        }

        .delete-btn-container {
            position: absolute;
            bottom: 15px;
            /* Adjust based on padding */
            right: 15px;
            /* Adjust based on padding */
        }
    </style>
</head>

<body>

    <!-- ======= Header ======= -->
    <header id="header" class="header fixed-top d-flex align-items-center">

        <div class="d-flex align-items-center justify-content-between">
            <a href="index.html" class="logo d-flex align-items-center">
                <img src="/static/img/GG Logo.jpg" alt="">
                <span class="d-none d-lg-block">GreenGrocer</span>
            </a>
            <i class="bi bi-list toggle-sidebar-btn"></i>
        </div><!-- End Logo -->

        <div class="search-bar">
            <form class="search-form d-flex align-items-center" method="POST" action="#">
                <input type="text" name="query" placeholder="Search" title="Enter search keyword">
                <button type="submit" title="Search"><i class="bi bi-search"></i></button>
            </form>
        </div><!-- End Search Bar -->

        <nav class="header-nav ms-auto">
            <ul class="d-flex align-items-center">

                <li class="nav-item dropdown pe-3">

                    <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
                        <img src="/static/img/profile-img.jpg" alt="Profile" class="rounded-circle">
                        <span class="d-none d-md-block dropdown-toggle ps-2">K. Anderson</span>
                    </a><!-- End Profile Iamge Icon -->

                </li><!-- End Profile Nav -->
                </li>

            </ul>
        </nav><!-- End Icons Navigation -->

    </header><!-- End Header -->




    <!-- ======= Sidebar ======= -->
    <aside id="sidebar" class="sidebar">

        <ul class="sidebar-nav" id="sidebar-nav">

            <li class="nav-item">
                <a class="nav-link " href="index.html">
                    <i class="bi bi-person"></i>
                    <span>Staff</span>
                </a>
            </li><!-- End Staff Nav -->



            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-target="#products-nav" data-bs-toggle="collapse" href="#">
                    <i class="bi bi-person-circle"></i><span>Accounts</span><i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <ul id="products-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
                    <li>
                        <a href="components-buttons.html">
                            <i class="bi bi-circle"></i><span>Buttons</span>
                        </a>
                    </li>

                </ul>
            </li><!-- End Procuts Nav (Ash to add)-->




            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-target="#products-nav" data-bs-toggle="collapse" href="#">
                    <i class="bi bi-cart-plus"></i><span>Products</span><i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <ul id="products-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
                    <li>
                        <a href="components-buttons.html">
                            <i class="bi bi-circle"></i><span>Buttons</span>
                        </a>
                    </li>

                </ul>
            </li><!-- End Procuts Nav (Tia to add)-->

            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-target="#cs-nav" data-bs-toggle="collapse" href="#">
                    <i class="bi bi-person-workspace"></i><span>Customer Support</span><i
                        class="bi bi-chevron-down ms-auto"></i>
                </a>
                <ul id="cs-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
                    <li>
                        <a href="staff_mytickets.html">
                            <i class="bi bi-circle"></i><span>My Tickets</span>
                        </a>
                    </li>
                    <li>
                        <a href="staff_assignees.html">
                            <i class="bi bi-circle"></i><span>Assignees</span>
                        </a>
                    </li>
                </ul>
            </li><!-- End CS Nav (Rachel to add)-->



            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-target="#cs-nav" data-bs-toggle="collapse" href="#">
                    <i class="bi bi-wallet2"></i><span>Billing</span><i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <ul id="cs-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
                    <li>
                        <a href="pages-faq.html">
                            <i class="bi bi-circle"></i><span>My Tickets</span>
                        </a>
                    </li>
                </ul>
            </li><!-- End CS Nav (WB to add)-->





            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-target="#tables-nav" data-bs-toggle="collapse" href="#">
                    <i class="bi bi-bar-chart"></i><span>Analytics</span><i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <ul id="tables-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
                    <li>
                        <a href="tables-general.html">
                            <i class="bi bi-circle"></i><span>Tables</span>
                        </a>
                    </li>
                </ul>
            </li><!-- End Tables Nav (WB to add) -->

            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-target="#settings-nav" data-bs-toggle="collapse" href="#">
                    <i class="bi bi-gear"></i><span>Settings</span><i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <ul id="settings-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
                    <li>
                        <a href="tables-general.html">
                            <i class="bi bi-circle"></i><span>Tables</span>
                        </a>
                    </li>

                </ul>
            </li><!-- End Settings Nav (Ash to add)-->

            <li class="nav-item">
                <a class="nav-link collapsed" data-bs-target="#logout-nav" data-bs-toggle="collapse" href="#">
                    <i class="bi bi-box-arrow-left"></i><span>Log Out</span><i class="bi bi-chevron-down ms-auto"></i>
                </a>
                <ul id="logout-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
                    <li>
                        <a href="tables-general.html">
                            <i class="bi bi-circle"></i><span>Log out?</span>
                        </a>
                    </li>
                </ul>
            </li><!-- End Tables Nav (Ash to add) -->

        </ul>

    </aside><!-- End Sidebar-->


    <main id="main" class="main">

        <div class="pagetitle">
            <h1>Assignees</h1>
            <nav>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">Customer Support</li>
                    <li class="breadcrumb-item active">Assignees</li>
                </ol>
            </nav>
        </div><!-- End Page Title -->

        <div class="container mt-5">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h4>Total: <b>{{ assignees|length }}</b> Assignees</h4>
                <button class="btn btn-success" data-toggle="modal" data-target="#addAssigneeModal">Add
                    Assignee</button>
            </div>
            <div class="row">
                {% for assignee in assignees %}
                <div class="col-md-4">
                    <div class="assignee-card">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5>{{ assignee['name'] }}</h5>
                            <a href="#" class="edit-icon" data-toggle="modal"
                                data-target="#editAssigneeModal_{{ assignee['email_id'] }}">&#9998;</a>

                        </div>
                        <p><a href="mailto:{{ assignee['email'] }}">{{ assignee['email'] }}</a></p>
                        <p>Role: {{ assignee['role'] }}</p>
                        <p>Tickets Solved: {{ assignee['tickets_solved'] }}</p>
                        <div class="delete-btn-container">
                            <button type="button" class="btn btn-danger btn-sm" data-toggle="modal"
                                data-target="#deleteModal_{{ assignee['email_id'] }}">
                                Delete
                            </button>

                            <div class="modal fade" id="deleteModal_{{ assignee['email_id'] }}" tabindex="-1"
                                role="dialog" aria-labelledby="deleteModalLabel_{{ assignee['email_id'] }}"
                                aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="deleteModalLabel_{{ assignee['email_id'] }}">
                                                Delete Confirmation</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            Are you sure you want to delete this assignee?
                                        </div>
                                        <div class="modal-footer">
                                            <form action="{{ url_for('delete_assignee', email=assignee['email']) }}"
                                                method="POST">
                                                <button type="submit" class="btn btn-danger">Delete</button>
                                                <button type="button" class="btn btn-secondary"
                                                    data-dismiss="modal">Cancel</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>



                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Add Assignee Modal -->
<div class="modal fade" id="addAssigneeModal" tabindex="-1" role="dialog"
aria-labelledby="addAssigneeModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="addAssigneeModalLabel">Add Assignee</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <form action="{{ url_for('add_assignee') }}" method="post">
            <div class="modal-body">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" class="form-control" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" class="form-control" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="role">Role</label>
                    <select class="form-control" id="role" name="role" required>
                        <option value="">Select Role</option>
                        <option value="Admin">Admin</option>
                        <option value="Manager">Manager</option>
                        <option value="Employee">Employee</option>
                        <option value="Staff">Staff</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tickets_solved">Tickets Solved</label>
                    <input type="number" class="form-control" id="tickets_solved" name="tickets_solved"
                    min="0" required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-primary">Add Assignee</button>
            </div>
        </form>
    </div>
</div>
</div>




       <!-- Edit Assignee Modal -->
{% for assignee in assignees %}
<div class="modal fade" id="editAssigneeModal_{{ assignee['email_id'] }}" tabindex="-1" role="dialog"
    aria-labelledby="editAssigneeModalLabel_{{ assignee['email_id'] }}" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editAssigneeModalLabel_{{ assignee['email_id'] }}">Edit Assignee</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="{{ url_for('edit_assignee', email=assignee['email']) }}" method="post">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" class="form-control" id="name" name="name"
                            value="{{ assignee['name'] }}" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" class="form-control" id="email" name="email"
                            value="{{ assignee['email'] }}" required>
                    </div>
                    <div class="form-group">
                        <label for="role">Role</label>
                        <select class="form-control" id="role" name="role" required>
                            <option value="Admin" {% if assignee['role'] == 'Admin' %}selected{% endif %}>Admin</option>
                            <option value="Manager" {% if assignee['role'] == 'Manager' %}selected{% endif %}>Manager</option>
                            <option value="Employee" {% if assignee['role'] == 'Employee' %}selected{% endif %}>Employee</option>
                            <option value="Staff" {% if assignee['role'] == 'Staff' %}selected{% endif %}>Staff</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="tickets_solved">Tickets Solved</label>
                        <input type="number" class="form-control" id="tickets_solved" name="tickets_solved"
                            value="{{ assignee['tickets_solved'] }}" min="0" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Update Assignee</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endfor %}

    </main>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>
