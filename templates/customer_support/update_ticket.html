{% extends "base.html" %}
{% block title %} Update Ticket{% endblock %}
{% block content %}

<section class="section">
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Update Ticket</h5>
            <br>
            <!-- Update Ticket Form -->
            <form class="row g-3" method="POST" action="{{ url_for('cust_update_ticket', ticket_id=ticket_id) }}">
                <div class="row mb-3">
                    <label for="inputUsername" class="col-sm-2 col-form-label">Username</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="inputUsername" name="username"
                            value="{{ form.username.data }}" required>
                    </div>
                </div>

                <div class="row mb-3">
                    <label for="inputEmail" class="col-sm-2 col-form-label">Email Address</label>
                    <div class="col-sm-10">
                        <input type="email" class="form-control" id="inputEmail" name="email"
                            value="{{ form.email.data }}" required>
                    </div>
                </div>

                <div class="row mb-3">
                    <label for="inputDate" class="col-sm-2 col-form-label">Date</label>
                    <div class="col-sm-10">
                        <input type="date" class="form-control" id="inputDate" name="date"
                            value="{{ form.date.data }}" required>
                    </div>
                </div>

                <div class="row mb-3">
                    <label for="inputTime" class="col-sm-2 col-form-label">Time</label>
                    <div class="col-sm-10">
                        <input type="time" class="form-control" id="inputTime" name="time"
                            value="{{ form.time.data }}" required>
                    </div>
                </div>

                <div class="row mb-3">
                    <label for="inputTopic" class="col-sm-2 col-form-label">Topic</label>
                    <div class="col-sm-10">
                        <select class="form-control" id="inputTopic" name="topic" required>
                            <option value="">Select a topic</option>
                            <option value="Account Login Issue" {% if form.topic.data=='Account Login Issue'
                                %}selected{% endif %}>Account Login Issue</option>
                            <option value="Account Management" {% if form.topic.data=='Account Management'
                                %}selected{% endif %}>Account Management</option>
                            <option value="Account Security" {% if form.topic.data=='Account Security'
                                %}selected{% endif %}>Account Security</option>
                            <option value="Billing Inquiry" {% if form.topic.data=='Billing Inquiry'
                                %}selected{% endif %}>Billing Inquiry</option>
                            <option value="Delivery Issue" {% if form.topic.data=='Delivery Issue' %}selected{%
                                endif %}>Delivery Issue</option>
                            <option value="Delivery Status" {% if form.topic.data=='Delivery Status'
                                %}selected{% endif %}>Delivery Status</option>
                            <option value="Order Inquiry" {% if form.topic.data=='Order Inquiry' %}selected{%
                                endif %}>Order Inquiry</option>
                            <option value="Order Issue" {% if form.topic.data=='Order Issue' %}selected{% endif
                                %}>Order Issue</option>
                            <option value="Product Availability" {% if form.topic.data=='Product Availability'
                                %}selected{% endif %}>Product Availability</option>
                            <option value="Product Enquiry" {% if form.topic.data=='Product Enquiry'
                                %}selected{% endif %}>Product Enquiry</option>
                            <option value="Refund Request" {% if form.topic.data=='Refund Request' %}selected{%
                                endif %}>Refund Request</option>
                            <option value="Refund Status" {% if form.topic.data=='Refund Status' %}selected{%
                                endif %}>Refund Status</option>
                            <option value="Technical Status" {% if form.topic.data=='Technical Status'
                                %}selected{% endif %}>Technical Status</option>
                            <option value="Subscription Renewal" {% if form.topic.data=='Subscription Renewal'
                                %}selected{% endif %}>Subscription Renewal</option>
                            <option value="Customer Support" {% if form.topic.data=='Customer Support'
                                %}selected{% endif %}>Customer Support</option>
                        </select>
                    </div>
                </div>


                <div class="row mb-3">
                    <label for="inputIssue" class="col-sm-2 col-form-label">What's the issue?</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" id="inputIssue" rows="5" name="issue"
                            required>{{ form.issue.data }}</textarea>
                    </div>
                </div>



                <!-- Script to toggle "Other" topic input -->
                <script>
                    document.getElementById('inputTopic').addEventListener('change', function () {
                        var otherTopicContainer = document.getElementById('otherTopicContainer');
                        var inputTopic = this.value;
                        if (inputTopic === 'Other') {
                            otherTopicContainer.style.display = 'block';
                            document.getElementById('inputOtherTopic').setAttribute('required', 'required');
                        } else {
                            otherTopicContainer.style.display = 'none';
                            document.getElementById('inputOtherTopic').removeAttribute('required');
                        }
                    });

                    // Trigger the change event on page load to handle the pre-selected value
                    document.getElementById('inputTopic').dispatchEvent(new Event('change'));
                </script>


                <div class="row mb-3">
                    <div class="col-sm-10 offset-sm-2">
                        <button type="submit" class="btn btn-primary">Update Ticket</button>
                        <button type="reset" class="btn btn-secondary">Reset</button>
                    </div>
                </div>
            </form>
            <!-- End Update Ticket Form -->
        </div>
    </div>
</section>


    </main><!-- End #main -->

    <!-- Vendor JS Files -->
    <script src="/static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/static/vendor/php-email-form/validate.js"></script>
    <script src="/static/vendor/quill/quill.min.js"></script>
    <script src="/static/vendor/tinymce/tinymce.min.js"></script>
    <script src="/static/vendor/simple-datatables/simple-datatables.js"></script>
    <script src="/static/vendor/chart.js/chart.min.js"></script>
    <script src="/static/vendor/apexcharts/apexcharts.min.js"></script>
    <script src="/static/vendor/echarts/echarts.min.js"></script>

    <!-- Template Main JS File -->
    <script src="/static/js/main.js"></script>
    <!-- Script to toggle "Other" topic input -->
    <script>
        document.getElementById('inputTopic').addEventListener('change', function () {
            var otherTopicContainer = document.getElementById('otherTopicContainer');
            var inputTopic = this.value;
            if (inputTopic === 'Other') {
                otherTopicContainer.style.display = 'block';
                document.getElementById('inputOtherTopic').setAttribute('required', 'required');
            } else {
                otherTopicContainer.style.display = 'none';
                document.getElementById('inputOtherTopic').removeAttribute('required');
            }
        });

        // Trigger the change event on page load to handle the pre-selected value
        document.getElementById('inputTopic').dispatchEvent(new Event('change'));
    </script>

{% endblock %}
</body>

</html>
